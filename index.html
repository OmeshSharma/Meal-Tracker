<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Mealtracker | Home</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
</head>
<body>

<header>
  <h1>Mealtracker</h1>
  <div class="nav-links">
    <a href="{{ url_for('main.index') }}">Home</a>
    <a href="{{ url_for('main.add_food') }}">Add Meal</a>
  </div>
</header>

<div class="container">
  <h3>Add New Date</h3>
  <form action="{{ url_for('main.create_log') }}" method="POST">
    <label for="date">Select Date</label>
    <input type="date" name="date" required />
    <button type="submit">Add Date</button>
  </form>

  <h4>Existing Records ({{ log_dates|length }})</h4>
  {% for row in log_dates|batch(3) %}
  <div class="row">
    {% for log_date in row %}
    <div class="container">
      <h4>{{ log_date['log_date'].date.strftime('%B %d, %Y') }}</h4>
      <p><strong>Protein:</strong> {{ log_date['proteins'] }}</p>
      <p><strong>Carbs:</strong> {{ log_date['carbs'] }}</p>
      <p><strong>Fat:</strong> {{ log_date['fats'] }}</p>
      <p><strong>Calories:</strong> {{ log_date['calories'] }}</p>
      <a href="{{ url_for('main.view_log', log_id=log_date['log_date'].id) }}">View Details →</a>
      <form action="{{ url_for('main.delete_log', log_id=log_date['log_date'].id) }}" 
            method="POST" style="margin-top:8px;">
        <button onclick="return confirm('Are you sure you want to delete this date?')" 
                style="background:#ef4444;">
          Delete Date
        </button>
      </form>
    </div>
    {% endfor %}
  </div>
  {% endfor %}
</div>

<footer>
  © 2025 Mealtracker
</footer>
</body>
</html>
